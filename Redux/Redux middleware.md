# Redux middleware

## Redux middleware의 사용 이유
### 👉🏻 Redux의 동작 흐름
![Redux의 동작 흐름](https://user-images.githubusercontent.com/75539452/210132259-db22411a-c3e7-402e-9afc-f02e390879e0.png)

- 기존의 리덕스의 경우, Action 발생 → dispatch를 통해 Store에게 상태변화 필요성 알림
    
    **💡 dispatch 된 Action을 Store로 전달하기 전에 처리하고 싶은 작업이 있다면?** <br/>
    
    예) 어떤 액션이 발생했는지 로그 남기기, 액션 취소, 또 다른 액션 발생 등
    
    <br/>
    
- 리덕스는 **동기적 흐름**을 통해 동작
    
    **📎 동기적 흐름이란?** <br/>
    
    액션 객체가 생성되고, 디스패치가 액션 발생을 스토어에게 알리면, 리듀서는 정해진 로직에 의해 액션을 처리한 후 새로운 상태값을 반환하는 과정
   
    <br/>
    
    하지만, **동기적 흐름만으로 처리하기 힘든 작업**이 있음 → 시간을 딜레이 시켜 동작하게 하기, 외부 데이터 요청하여 그에 따른 응답을 화면에 보여주기 등

    이런 **비동기 작업**은 `redux middleware`를 사용해 처리함

<br/>
    
    
### 👉🏻 Redux middleware의 동작 흐름
![Redux middleware의 동작 흐름](https://user-images.githubusercontent.com/75539452/210132264-279fd240-4899-4ede-849f-294da2c4dff1.png)


## 대표적인 redux middleware

직접 만들어서 원하는 작업을 처리할 수도 있지만, 이미 만들어진 미들웨어를 가져다가 사용함

- **redux-logger**: 어떤 액션이 발생했는지 로그를 남겨주는 미들웨어
- **redux-thunk, redux-saga**: 비동기 작업을 처리할 수 있게 해주는 미들웨어
<br/>

## 👉🏻 redux-logger

- 앱에서 발생하는 **액션 정보를 콘솔에 출력**해주는 미들웨어

리덕스 미들웨어의 동작 방식을 생각해보면 dispatch된 Action이 Store로 전달되기 전에, middleware에서 원하는 작업을 처리한 후 Store로 Action을 전달

즉, `redux-logger 미들웨어`는 디스패치된 액션이 어떤 액션인지 확인 후, 콘솔에 로그를 남기고 액션을 스토어로 전달해주는 간단하지만, 리덕스 미들웨어의 동작 방식을 이해할 수 있는 좋은 예

<br/>

## 👉🏻 redux-thunk 그리고 thunk

- **비동기 작업을 다루는 미들웨어** 중에서 가장 대표적인 리덕스 미들웨어
    
    💡 **thunk란? thunk**는 주로 연산 결과가 필요할 때까지 **연산을 지연시키는 용도**로 사용됨
    

thunk의 정의처럼 연산 결과가 필요할 때까지 연산을 지연시키고 싶다면 아래와 같이 함수로 코드를 감싼 후, 필요할 때 함수를 호출

```jsx
const foo = () => {
  console.log(1+2);
}
```

기존의 리덕스에서 액션 생성 함수는 액션을 객체 형태로 반환해주는 함수. 하지만 redux-thunk를 이용하면 **액션 생성 함수는 객체가 아닌 함수를 반환** 가능

즉, 객체가 아닌 함수를 반환해줌으로서 **`필요할 때 함수를 호출할 수 있는 thunk의 형태`**가 되는 것

<br/>

## 👉🏻 redux-saga

- 액션을 모니터링하고 있다가, **특정 액션이 발생하면 이에 따라 특정 작업을 하는 방식**으로 사용
→ 특정 작업이란, 특정 자바스크립트를 실행하는 것, 다른 액션을 디스패치 하는 것, 현재 상태를 불러오는

또한,  redux-saga는 redux-thunk로 못하는 다양한 작업들을 처리 가능

<br/>

**TODO) redux-thunk, redux-saga 추후 자세히 추가**
